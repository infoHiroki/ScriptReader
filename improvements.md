改善点のまとめ
# スレッド管理の問題を解決するための改善点

## 問題点
1. 複数のスレッドが同時に動作し、音声ファイルの生成や再生に競合が発生していた
2. キャッシュ管理が複雑で、同時に複数のスライドの音声が読み込まれる可能性があった
3. UIの状態とバックグラウンド処理の同期が取れていなかった

## 改善策
1. **同期的な音声読み込み処理**
   - スレッドを使わず、メインスレッドで音声ファイルを生成
   - 読み込み中は明確なUI表示で状態を伝える
   - 一度に一つのスライドの音声のみを処理

2. **キャッシュ管理の簡素化**
   - 現在のスライド以外のキャッシュは積極的に削除
   - キャッシュ状態の管理を単純化

3. **UIフィードバックの改善**
   - 処理中の状態をリアルタイムに表示
   - root.update()を使用してUI更新を確実に反映
   - エラー時の詳細なフィードバック提供

## 利点
1. スレッド競合によるバグの排除
2. メモリ使用量の削減
3. コードの可読性と保守性の向上
4. ユーザー体験の向上（より安定した動作）

## 注意点
- 音声生成中はUIがブロックされるため、大きなファイルの処理時に一時的に応答がなくなる
- これは大きな問題ではなく、むしろ明確なフィードバックにより改善された体験を提供

## 実装ポイント
1. `start_audio_preload`メソッドを書き換え、同期的な処理に変更
2. 新しい`_load_audio_synchronous`メソッドを追加
3. 不要なアニメーション関連のコードを削除
4. UI更新のタイミングを適切に調整
EOT < /dev/null